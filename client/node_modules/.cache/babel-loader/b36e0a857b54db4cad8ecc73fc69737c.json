{"ast":null,"code":"\"use strict\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.scripts = void 0;\n\nvar react_1 = require(\"react\"); // Previously loading/loaded scripts and their current status\n\n\nexports.scripts = {}; // Check for existing <script> tags with this src. If so, update scripts[src]\n// and return the new status; otherwise, return undefined.\n\nvar checkExisting = function (src) {\n  var existing = document.querySelector(\"script[src=\\\"\" + src + \"\\\"]\");\n\n  if (existing) {\n    // Assume existing <script> tag is already loaded,\n    // and cache that data for future use.\n    return exports.scripts[src] = {\n      loading: false,\n      error: null,\n      scriptEl: existing\n    };\n  }\n\n  return undefined;\n};\n\nfunction useScript(_a) {\n  var src = _a.src,\n      _b = _a.checkForExisting,\n      checkForExisting = _b === void 0 ? false : _b,\n      attributes = __rest(_a, [\"src\", \"checkForExisting\"]); // Check whether some instance of this hook considered this src.\n\n\n  var status = src ? exports.scripts[src] : undefined; // If requested, check for existing <script> tags with this src\n  // (unless we've already loaded the script ourselves).\n\n  if (!status && checkForExisting && src && isBrowser) {\n    status = checkExisting(src);\n  }\n\n  var _c = (0, react_1.useState)(status ? status.loading : Boolean(src)),\n      loading = _c[0],\n      setLoading = _c[1];\n\n  var _d = (0, react_1.useState)(status ? status.error : null),\n      error = _d[0],\n      setError = _d[1];\n\n  (0, react_1.useEffect)(function () {\n    // Nothing to do on server, or if no src specified, or\n    // if loading has already resolved to \"loaded\" or \"error\" state.\n    if (!isBrowser || !src || !loading || error) return; // Check again for existing <script> tags with this src\n    // in case it's changed since mount.\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n\n    status = exports.scripts[src];\n\n    if (!status && checkForExisting) {\n      status = checkExisting(src);\n    } // Determine or create <script> element to listen to.\n\n\n    var scriptEl;\n\n    if (status) {\n      scriptEl = status.scriptEl;\n    } else {\n      scriptEl = document.createElement('script');\n      scriptEl.src = src;\n      Object.keys(attributes).forEach(function (key) {\n        if (scriptEl[key] === undefined) {\n          scriptEl.setAttribute(key, attributes[key]);\n        } else {\n          scriptEl[key] = attributes[key];\n        }\n      });\n      status = exports.scripts[src] = {\n        loading: true,\n        error: null,\n        scriptEl: scriptEl\n      };\n    } // `status` is now guaranteed to be defined: either the old status\n    // from a previous load, or a newly created one.\n\n\n    var handleLoad = function () {\n      if (status) status.loading = false;\n      setLoading(false);\n    };\n\n    var handleError = function (error) {\n      if (status) status.error = error;\n      setError(error);\n    };\n\n    scriptEl.addEventListener('load', handleLoad);\n    scriptEl.addEventListener('error', handleError);\n    document.body.appendChild(scriptEl);\n    return function () {\n      scriptEl.removeEventListener('load', handleLoad);\n      scriptEl.removeEventListener('error', handleError);\n    }; // we need to ignore the attributes as they're a new object per call, so we'd never skip an effect call\n  }, [src]);\n  return [loading, error];\n}\n\nexports.default = useScript;\nvar isBrowser = typeof window !== 'undefined' && typeof window.document !== 'undefined';","map":{"version":3,"mappings":"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","names":["exports","checkExisting","src","existing","document","querySelector","loading","error","scriptEl","undefined","useScript","_a","_b","checkForExisting","attributes","status","isBrowser","Boolean","setLoading","setError","createElement","Object","keys","forEach","key","setAttribute","handleLoad","handleError","addEventListener","body","appendChild","removeEventListener","window"],"sources":["../src/use-script.tsx"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}